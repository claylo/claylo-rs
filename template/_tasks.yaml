# =============================================================================
# Post-Generation Tasks
# =============================================================================
#
# These tasks run automatically after `copier copy` (requires --trust flag).
# Users can skip them with `copier copy --skip-tasks` and run manually instead.
#
# =============================================================================
_tasks:
  - command: git init
    when: "{{ _copier_operation == 'copy' }}"

  # Hook installation (only one will run based on hook_system choice)
  - command: cog install-hook --all
    when: "{{ _copier_operation == 'copy' and has_cog }}"

  - command: pre-commit install
    when: "{{ _copier_operation == 'copy' and has_pre_commit }}"

  - command: lefthook install
    when: "{{ _copier_operation == 'copy' and has_lefthook }}"

  # Initial commit
  - command: git add -A
    when: "{{ _copier_operation == 'copy' }}"

  - command: ["git", "commit", "-m", "chore: initial commit"]
    when: "{{ _copier_operation == 'copy' }}"
