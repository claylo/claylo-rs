[package]
name = "{{ project_name }}"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
description.workspace = true
repository.workspace = true
homepage.workspace = true
readme.workspace = true
exclude = [
    # Workspace-level files (/ = workspace root)
{% if has_claude %}   "/.claude/",
{% endif %}{% if has_github %}    "/.github/",
{% endif %}{% if has_agents_md %}    "/AGENTS.md",
{% endif %}{% if has_just %}    "/.justfile",
{% endif %}{% if has_editorconfig %}    "/.editorconfig",
{% endif %}{% if has_md or has_md_strict %}    "/.markdownlint.yaml",
{% endif %}{% if has_yamllint %}    "/.yamllint",
{% endif %}{% if has_env_files %}    "/.envrc",
    "/.env",
    "/.env.rust",
{% endif %}{% if has_benchmarks %}
    "/bench-reports/",
    "/scripts/",
{% endif %}
    "/docs/",
    "/deny.toml",
]

[[bin]]
name = "{{ project_name }}"
path = "src/main.rs"

[package.metadata.binstall]
pkg-url = "{ repo }/releases/download/v{ version }/{ name }-{ target }.{ archive-format }"
bin-dir = "{ bin }{ binary-ext }"
pkg-fmt = "tgz"

[package.metadata.binstall.overrides.x86_64-pc-windows-msvc]
pkg-url = "{ repo }/releases/download/v{ version }/{ name }-v{ version }-{ target }.zip"
pkg-fmt = "zip"
bin-dir = "{ bin }{ binary-ext }"

[dependencies]
{% if has_core_library -%}
{{ project_name }}-core = { version = "0.1", path = "../{{ project_name }}-core" }
{% endif -%}
clap = { version = "4.5", features = ["derive"] }
anyhow = "1.0"
tracing = "0.1"
{% if has_jsonl_logging or has_opentelemetry -%}
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
tracing-appender = "0.2"
{% endif -%}
{% if has_opentelemetry -%}
opentelemetry = { version = "0.31", features = ["trace"] }
opentelemetry_sdk = { version = "0.31", features = ["trace", "rt-tokio"] }
opentelemetry-otlp = { version = "0.31", features = ["grpc-tonic", "http-json", "reqwest-blocking-client"] }
tracing-opentelemetry = "0.32"
{% endif -%}
{% if needs_tokio -%}
tokio = { version = "1", features = ["rt-multi-thread", "macros"] }
{% endif -%}
{% if has_mcp_server -%}
rmcp = { version = "0.14", features = ["server", "transport-io", "macros"] }
schemars = "1.0"
{% endif -%}
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
owo-colors = { version = "4.1", features = ["supports-colors"] }
{% if has_config -%}
camino = { version = "1.1", features = ["serde1"] }
{% endif -%}
{% if has_jsonl_logging or has_opentelemetry -%}
dirs = "6.0"
{% endif -%}
{% if has_config and not has_core_library -%}
dirs = "6.0"
figment = { version = "0.10", features = ["toml", "yaml", "json"] }
thiserror = "2.0"
{% endif %}
[dev-dependencies]
assert_cmd = "2.0"
predicates = "3.1"
{% if has_config -%}
tempfile = "3.20"
{% endif -%}

[lints]
workspace = true
